---
id: create-policy
title: "Create Policy"
description: "Create a policy that targets either Run User or Analysis"
sidebar_label: "Create Policy"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/tagoio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create Policy"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/am"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a policy that targets either Run User or Analysis

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"User Policy","required":["name","permissions","targets","active"],"properties":{"name":{"type":"string","description":"Name of the policy","example":"User permissions"},"permissions":{"type":"array","description":"Array of permission objects","items":{"type":"object","properties":{"effect":{"type":"string","enum":["allow","deny"],"description":"Allow or deny the permission","example":"allow"},"action":{"type":"array","items":{"type":"string"},"description":"Actions allowed: access, edit, delete, create","example":["access"]},"resource":{"type":"array","items":{"type":"string"},"description":"Resources: device, dashboard, analysis, run_user, etc.","example":["device"]}}}},"targets":{"type":"array","description":"Global: [\"run_user\"]. Specific: [\"run_user\", \"id\", \"user_id\"]. Tag-based: [\"run_user\", \"tag_match\", \"tag_key\"]","items":{"type":"array","items":{"type":"string"},"example":["run_user"]},"example":[["run_user"]]},"tags":{"type":"array","description":"Optional tags for targeting specific users/analysis","items":{"type":"object","properties":{"key":{"type":"string","description":"Tag key","example":"user"},"value":{"type":"string","description":"Tag value","example":"admin"}}},"example":[{"key":"user","value":"admin"}]},"active":{"type":"boolean","description":"Whether the policy is active","example":true}}},{"type":"object","title":"Analysis Policy","required":["name","permissions","targets","active"],"properties":{"name":{"type":"string","description":"Name of the policy","example":"Policy"},"permissions":{"type":"array","description":"Array of permission objects","items":{"type":"object","properties":{"effect":{"type":"string","enum":["allow","deny"],"description":"Allow or deny the permission","example":"allow"},"action":{"type":"array","items":{"type":"string"},"description":"Actions allowed: access, edit, delete, create","example":["edit","delete","create","access"]},"resource":{"type":"array","items":{"type":"string"},"description":"Resources: device, dashboard, analysis, run_user, etc.","example":["device"]}}}},"targets":{"type":"array","description":"Global: [\"analysis\"]. Specific: [\"analysis\", \"id\", \"analysis_id\"]. Tag-based: [\"analysis\", \"tag_match\", \"tag_key\"]","items":{"type":"array","items":{"type":"string"},"example":["analysis"]},"example":[["analysis"]]},"tags":{"type":"array","description":"Optional tags for targeting specific users/analysis","items":{"type":"object","properties":{"key":{"type":"string","description":"Tag key","example":"user"},"value":{"type":"string","description":"Tag value","example":"admin"}}},"example":[{"key":"user","value":"admin"}]},"active":{"type":"boolean","description":"Whether the policy is active","example":true}}}]},"examples":{"Create Policy - Run User (Global)":{"value":{"name":"User permissions","permissions":[{"effect":"allow","action":["access"],"resource":["device"]}],"targets":[["run_user"]],"tags":[{"key":"user","value":"admin"}],"active":true}},"Create Policy - Run User (Specific ID)":{"value":{"name":"User permissions","permissions":[{"effect":"allow","action":["access"],"resource":["device"]}],"targets":[["run_user","id","68b5dd292ee817000af854dc"]],"tags":[{"key":"user","value":"admin"}],"active":true}},"Create Policy - Run User (Tag Match)":{"value":{"name":"User permissions","permissions":[{"effect":"allow","action":["access"],"resource":["device"]}],"targets":[["run_user","tag_match","account_token"]],"tags":[{"key":"user","value":"admin"}],"active":true}},"Create Policy - Analysis (Global)":{"value":{"name":"Policy","permissions":[{"effect":"allow","action":["edit","delete","create","access"],"resource":["device"]}],"targets":[["analysis"]],"tags":[{"key":"user","value":"admin"}],"active":true}},"Create Policy - Analysis (Specific ID)":{"value":{"name":"Policy","permissions":[{"effect":"allow","action":["edit","delete","create","access"],"resource":["device"]}],"targets":[["analysis","id","68b5dd292ee817000af854dc"]],"tags":[{"key":"user","value":"admin"}],"active":true}},"Create Policy - Analysis (Tag Match)":{"value":{"name":"Policy","permissions":[{"effect":"allow","action":["edit","delete","create","access"],"resource":["device"]}],"targets":[["analysis","tag_match","account_token"]],"tags":[{"key":"user","value":"admin"}],"active":true}}}},"text/plain":{"examples":{"Create Policy - Run User (Global)":{"value":"{\n    \"name\": \"User permissions\",\n    \"permissions\": [\n        {\n            \"effect\": \"allow\",\n            \"action\": [\"access\"],\n            \"resource\": [\"device\"]\n        }\n    ],\n    \"targets\": [[\"run_user\"]],\n    \"tags\": [{\"key\": \"user\", \"value\": \"admin\"}],\n    \"active\": true\n}"},"Create Policy - Analysis (Global)":{"value":"{\n    \"name\": \"Policy\",\n    \"permissions\": [\n        {\n            \"effect\": \"allow\",\n            \"action\": [\"edit\", \"delete\", \"create\", \"access\"],\n            \"resource\": [\"device\"]\n        }\n    ],\n    \"targets\": [[\"analysis\"]],\n    \"tags\": [{\"key\": \"user\", \"value\": \"admin\"}],\n    \"active\": true\n}"}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Create Policy - Run User / Create Policy - Analysis","content":{"application/json":{"schema":{"type":"object","properties":{"result":{"type":"object","properties":{"am_id":{"type":"string","example":"654a8bf3fefe2f00099a16a2"}}},"status":{"type":"boolean","example":true}}}}}}}}
>
  
</StatusCodes>


      